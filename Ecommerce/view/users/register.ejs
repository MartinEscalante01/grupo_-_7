<!DOCTYPE html>
<html lang="en">

<head>
    <link rel="stylesheet" href="../css/styleRegister.css"> 

    <%- include('../partials/head.ejs') %>
        <title>Registrate</title>
</head>
<body>
    <main>
        <nav class="opciones">
            <a href="/"> ← Volver al home</a>
        </nav>
        
        <div class="errores">
            <ul></ul>
        </div>

        <div class="container" id="container">
            <div class="form-container sign-in-container">

                

                <form class="validation" id="formulario" method="POST" action="/users/register" enctype="multipart/form-data">
                    <h1>Formulario de registro</h1>

                    <div class="selector-box">
                        <input class="name" type="text" name="fullName" <%= locals.errors && errors.fullName ? 'is-invalid' : null %> value="<%= locals.oldData ? oldData.fullName : null %>" placeholder="Nombre Completo"  minlength="2">
                            <% if (locals.errors && errors.fullName) { %>
                                <div class="text-danger">
                                    <%= errors.fullName.msg %> 
                                </div>
                            <% } %>
                    
                        <input type="password" name="password"  minlength="8" class="form-control <%= locals.errors && errors.password ? 'is-invalid' : null %>" placeholder="Password">
                            <% if (locals.errors && errors.password) { %>
                                <div class="text-danger">
                                    <%= errors.password.msg %>
                                </div>
                            <% } %>  

                        <input 
                            type="email" 
                            name="email"
                            
                            class="form-control email <%= locals.errors && errors.email ? 'is-invalid' : null %>"
                            value="<%= locals.oldData ? oldData.email : null %>"
                            placeholder="Correo Electrónico">
                            <% if (locals.errors && errors.email) { %>
                                <div class="text-danger">
                                    <%= errors.email.msg %>
                                </div>
                            <% } %>

                        <select name="gender" class="form-select <%= locals.errors && errors.gender ? 'is-invalid' : null %>">
                            <option value="#" selected disabled>Seleccione su genero...</option>
                            <% genders.forEach(gender => { %>
                              <option value="<%=gender.id %>"><%=gender.name %></option>
                            <% }); %>
                        </select>

                        
						<input type="date" placeholder="AAAA/MM/DD"  name="birthday" value="<%= locals.oldData ? oldData.birthday : null %>">
					    
                        <input type="tel"  placeholder="Numero de telefono" name="phone" max="10">

                        <select name="country" class="form-select <%= locals.errors && errors.country ? 'is-invalid' : null %>">
                            <option value="#" selected disabled>Seleccione su país...</option>
                            <% countries.forEach(country => { %>
                              <option value="<%=country.id %>"><%=country.name %></option>
                            <% }); %>
                        </select>
                        <% if (locals.errors && errors.country) { %>
                            <div class="text-danger">
                                <%= errors.country.msg %>
                            </div>
                        <% } %>

                        <select name="state" class="form-select <%= locals.errors && errors.state ? 'is-invalid' : null %>">
                            <option value="#" selected disabled>Seleccione su provincia...</option>
                            <% states.forEach(state => { %>
                              <option value="<%=state.id %>"><%=state.name %></option>
                            <% }); %>
                        </select>
                        <% if (locals.errors && errors.state) { %>
                            <div class="text-danger">
                                <%= errors.state.msg %>
                            </div>
                        <% } %>

                        <input type="file" name="file" class="form-control <%= locals.errors && errors.file ? 'is-invalid' : null %>">
								<% if (locals.errors && errors.file) { %>
									<div class="text-danger">
										<%= errors.file.msg %>
									</div>
								<% } %>

                        <select name="roles" class="form-select <%= locals.errors && errors.roles ? 'is-invalid' : null %>">
                            <option value="#" selected disabled>Seleccione su rol...</option>
                            <% roles.forEach(rol => { %>
                                <option value="<%=rol.id %>"><%=rol.name %></option>
                            <% }); %>
                        </select>

                                <button type="submit">REGISTRARSE</button>
                    </div>
                   
                    
                </form>
            </div>
            <div class="overlay-container">
                <div class="overlay">
                    <div class="overlay-panel overlay-right">
                        <h1>Hazte miembro!</h1>
                        <p>Unete a nuestra comunidad con tu perfil obtendras acceso anticipado a los mejores productos deportivos</p>
						<div class="acuerdos">                
						<div>
							<input type="checkbox" name="newsletter" id="opt-in">
							<label for="opt-in">Registrate para recibir correos electronicos del sitio con actualizaciones de productos, ofertas y beneficios como miembros</label>
						</div>
                    </div>
                </div>
            </div>
        </div>
        <script src="../js/formulario.js"></script>
    </main>
</body>

</html>