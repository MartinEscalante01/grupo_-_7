<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="../../css/styleRegister.css">
    <%- include('../partials/head.ejs') %>
    <title>Sportix | Editor de Usuarios </title>

</head>
<body>
    <header>
        <nav class="opciones">
            <a href="/users/profile"> ← Volver al Profile</a>
        </nav>
      </header>
    <main>
        
        <section>
            <h1>Editando el usuario <%= userEdit.fullName %></h1>
            <div class="todo">
                
                <div class="formulario">
                    <form method="POST" action="/users/register" enctype="multipart/form-data">
                        <div class="">
							<div class="controls">
								<label><b>Nombre completo:</b></label>
								<input type="text" name="fullName" value="<%= userEdit.fullName %>" class="form-control <%= locals.errors && errors.fullName ? 'is-invalid' : null %>" value="<%= locals.oldData ? oldData.fullName : null %>">
								<% if (locals.errors && errors.fullName) { %>
									<div class="text-danger">
										<%= errors.fullName.msg %> 
									</div>
								<% } %>
							</div>
						</div>

						<div class="">
							<div class="controls">
								<label><b>Genero:</b></label>
								<select name="gender"  class="form-select <%= locals.errors && errors.gender ? 'is-invalid' : null %>">
									<option value="<%= userEdit.gender %>">Elegí un Genero </option>
									<%  let gender = ['Femenino', 'Masculino', 'Otros'];%>
									<% for (const onegender of gender) { %>
										<option 
											value="<%= onegender %>"
											<%= locals.oldData && (onegender === oldData.gender) ? 'selected' : null %> 
										> <%= onegender %> </option>
									<% } %>
								</select>
								<% if (locals.errors && errors.country) { %>
									<div class="text-danger">
										<%= errors.gender.msg %>
									</div>
								<% } %>
							</div>
						</div>

						<div class="">
							<div class="controls">
								<label><b>Correo electrónico:</b></label>
								<input 
									type="text"
                                    value="<%= userEdit.email %>" 
									name="email" 
									class="form-control <%= locals.errors && errors.email ? 'is-invalid' : null %>"
									value="<%= locals.oldData ? oldData.email : null %>"
								>
								<% if (locals.errors && errors.email) { %>
									<div class="text-danger">
										<%= errors.email.msg %>
									</div>
								<% } %>
							</div>
						</div>
						<div class="">
							<div class="controls">
								<label><b>Password:</b></label>
								<input type="password" name="password" value="<%= userEdit.password %>" class="form-control <%= locals.errors && errors.password ? 'is-invalid' : null %>"
								>
								<% if (locals.errors && errors.password) { %>
									<div class="text-danger">
										<%= errors.password.msg %>
									</div>
								<% } %>
							</div>
						</div>
						
						<div class="">
							<div class="controls">
								<label><b>Fecha de Nacimiento:</b></label><br>
								<input type="date" value="<%= userEdit.birthday %>"  name="birthday" required="require">
								<br>
							</div>
						</div>

						<div class="">
							<div class="controls">
								<label><b>Contacto:</b></label><br>
								<input type="number"  value="<%= userEdit.phone %>"  name="phone">
								<br>
							</div>
						</div>

						<div class="">
							<div class="controls">
								<label><b>País:</b></label>
								<select name="country" class="form-select <%= locals.errors && errors.country ? 'is-invalid' : null %>">
									<option value="<%= userEdit.country %>" >Elegí un país</option>
									<%  let countries = ['Argentina', 'Bolivia', 'Brasil', 'Colombia', 'Chile', 'Ecuador', 'Paraguay', 'Perú', 'Uruguay', 'Venezuela'];%>
									<% for (const oneState of countries) { %>
										<option 
											value="<%= oneState %>"
											<%= locals.oldData && (oneState === oldData.country) ? 'selected' : null %> 
										> <%= oneState %> </option>
									<% } %>
								</select>
								<% if (locals.errors && errors.country) { %>
									<div class="text-danger">
										<%= errors.country.msg %>
									</div>
								<% } %>
							</div>
						</div>

						<div class="">
							<div class="controls">
								<label><b>Provincia:</b></label>
								<select name="state" class="form-select <%= locals.errors && errors.state ? 'is-invalid' : null %>">
									<option value="<%= userEdit.state %>" >Elegí una provincia</option>
									<%  let states = ['Otro', 'Buenos Aires', 'CABA', 'Catamarca', 'Chaco', 'Chubut', 'Cordoba', 'Corrientes', 'Entre Rios', 'Formosa', 'Jujuy', 'La Pampa', 'La Rioja', 'Mendoza', 'Misiones', 'Neuquen', 'Rio Negro', 'Salta', 'Santa Cruz', 'Santa Fe', 'San Juan', 'San Luis', 'Santiago del Estero', 'Tucuman', 'Tierra del Fuego'];%>
									<% for (const oneState of states) { %>
										<option 
											value="<%= oneState %>"
											<%= locals.oldData && (oneState === oldData.state) ? 'selected' : null %> 
										> <%= oneState %> </option>
									<% } %>
								</select>
								<% if (locals.errors && errors.state) { %>
									<div class="text-danger">
										<%= errors.state.msg %>
									</div>
								<% } %>
							</div>
						</div>

						<div class="">
							<div class="controls">
								<label><b>Perfil:</b></label>
								<input 
									type="file" 
									name="file"
                                    value="<%= userEdit.file %>" 
									class="form-control <%= locals.errors && errors.file ? 'is-invalid' : null %>"
								>
								<% if (locals.errors && errors.file) { %>
									<div class="text-danger">
										<%= errors.file.msg %>
									</div>
								<% } %>
							</div>
						</div>

						<div class="">
							<div class="controls">
								<label><b>Rol:</b></label>
								<select name="roles" class="form-select <%= locals.errors && errors.roles ? 'is-invalid' : null %>">
									<option value="<%= userEdit.roles %>" >Elegí un Rol </option>
									<%  let roles = ['Cliente', 'Admin'];%>
									<% for (const oneRol of roles) { %>
										<option value="<%= oneRol %>" <%= locals.oldData && (oneRol === oldData.roles) ? 'selected' : 'Cliente' %>> 
											<%= oneRol %> 
										</option>
									<% } %>
								</select>
							</div>
						</div>

						<div>
							<button type="submit" class="join">Modificar Datos</button>
						</div>
                    
                </div>
            </div>
		</form>
            
        </section>
    </main>

</body>
</html>